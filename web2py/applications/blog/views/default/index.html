{{extend 'layout.html'}}
<div class="content">
{{x=0}}
{{recorta = lambda x,y: A(' '.join(x[:30])+' Leer mas...',_href=URL("viewpost",args=y)) }}
{{read_more = lambda x,y: len(x.split()) < 30 and x or recorta(x.split(),y) }}
{{if not post:}}
   {{=DIV(H2(T(" No existen ArtÃ­culos"), _class='title'), _class='post')}}
{{pass}}
{{for p in post:}}
    <div class="post">
        {{=H3(A(p.articulos.titulo, _href=URL("viewpost", args=p.articulos.id)), _class='title')}} 
        <div class="entry"> {{=read_more(p.articulos.articulo,p.articulos.id)}}</div>
            {{=A(T("Escrito por %s el: %s Comentarios(%s)" % (p.auth_user.first_name,p.articulos.fecha,comments[x])), _class='meta')}}
    </div>
<hr />
{{x=x+1}}
{{pass}}
<br />
<!-- Paginador -->
<div class="pages">
{{ if totalpages > 1:}}
        Paginas: 
    {{ for i in range(1, totalpages+1): }}
        <span class="page">
            {{ if postpage == i and i>1: }} 
                <a href="/blog/?page={{=i-1}}">Atras</a>
                {{ pass }} 
            {{ else: }}
                {{ if i < totalpages+1 and postpage != i: }}
                    <a href="/blog/?page={{=postpage+1}}">Adelante</a>
                    {{ pass }}
                {{ pass }}
        </span>
        {{ pass }}
{{ pass }}
</div>
</div>

