<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Gecko caret tests</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<script type="text/javascript" src="../jscripts/tiny_mce/tiny_mce_dev.js"></script>
<script type="text/javascript">
function init() {
	tinyMCE.init({
		mode : "textareas",
		theme : "advanced",
		plugins : "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist",
		theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
		theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
		theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
		theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak,restoredraft",
		theme_advanced_toolbar_location : "top",
		theme_advanced_toolbar_align : "left",
		theme_advanced_statusbar_location : "bottom",
		theme_advanced_resizing : true,
		valid_elements: '*[*]',
		add_unload_trigger : false,
		editor_selector : 'editable',
		content_css: 'css/gecko_caret.css'
	});
}

function reInit10x() {
	tinymce.execCommand('mceRemoveControl', false, 'elm3');

	for (var i = 0; i < 10; i++) {
		tinymce.execCommand('mceRemoveControl', false, 'elm3');
		tinymce.execCommand('mceAddControl', false, 'elm3');
	}
}

init();
</script>
</head>
<body role="application">

<form method="post" action="http://tinymce.moxiecode.com/dump.php?example=true">
	<div>
		<h3>Visible editor</h3>

		<div>
			<div id="container1">
				<textarea id="elm1" name="elm1" rows="7" cols="80" style="width: 80%" class="editable">
					&lt;p&gt;
						This is some text that can be edited. &lt;b contenteditable="false"&gt;This is some text that isn't &lt;em contenteditable="true"&gt;editable&lt;/em&gt;.....&lt;/b&gt;
					&lt;/p&gt;
					&lt;p&gt;
						Another paragraph.
					&lt;/p&gt;
					&lt;table&gt;
						&lt;tr&gt;&lt;td&gt;Cell&lt;/td&gt;&lt;/tr&gt;
					&lt;/table&gt;
				</textarea>
			</div>
			<a href="#" onclick="tinymce.DOM.show('container1');return false;">[Show]</a>
			<a href="#" onclick="tinymce.DOM.hide('container1');return false;">[Hide]</a>
		</div>

		<h3>Invisible editor</h3>
		<div>
			<div id="container2" style="display: none">
				<textarea id="elm2" name="elm2" rows="7" cols="80" style="width: 80%" class="editable">
					&lt;p&gt;
						This is some text that can be edited. &lt;b contenteditable="false"&gt;This is some text that isn't &lt;em contenteditable="true"&gt;editable&lt;/em&gt;.....&lt;/b&gt;
					&lt;/p&gt;
					&lt;p&gt;
						Another paragraph.
					&lt;/p&gt;
					&lt;table&gt;
						&lt;tr&gt;&lt;td&gt;Cell&lt;/td&gt;&lt;/tr&gt;
					&lt;/table&gt;
				</textarea>
			</div>

			<a href="#" onclick="tinymce.DOM.show('container2');return false;">[Show]</a>
			<a href="#" onclick="tinymce.DOM.hide('container2');return false;">[Hide]</a>
		</div>
		
		<h3>On demand editor</h3>
		<div>
			<div id="container3">
				<textarea id="elm3" name="elm3" rows="7" cols="80" style="width: 80%">
					&lt;p&gt;
						This is some text that can be edited. &lt;b contenteditable="false"&gt;This is some text that isn't &lt;em contenteditable="true"&gt;editable&lt;/em&gt;.....&lt;/b&gt;
					&lt;/p&gt;
					&lt;p&gt;
						Another paragraph.
					&lt;/p&gt;
					&lt;table&gt;
						&lt;tr&gt;&lt;td&gt;Cell&lt;/td&gt;&lt;/tr&gt;
					&lt;/table&gt;
				</textarea>
			</div>

			<a href="#" onclick="tinymce.execCommand('mceAddControl', false, 'elm3');return false;">[Init]</a>
			<a href="#" onclick="tinymce.DOM.show('container3');return false;">[Show]</a>
			<a href="#" onclick="tinymce.DOM.hide('container3');return false;">[Hide]</a>
			<a href="#" onclick="tinymce.execCommand('mceRemoveControl', false, 'elm3');return false;">[Remove]</a>
			<a href="#" onclick="reInit10x();return false;">[Re-init 10x]</a>
		</div>
	</div>
</form>

</body>
</html>